<!DOCTYPE html>

<!--
Nombre del script : controle_introducida_10.htm
Autor : Christian VIGOUROUX
Fecha de creación : 15/10/2018
Fecha de última modificación : 15/10/2018
Objetivo : Temporizador
-->

<!-- Etiqueta HTML -->
<html lang="es-ES">

  <!-- Sección HEAD -->
  <head>
    <!-- Etiqueta meta de gestión de los acentos UTF-8 -->
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">	 
    <!-- Llamada al Framework AngularJS -->
    <script
      src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js">
    </script>
  </head>

  <!-- Sección BODY -->
  <body>

    <!-- Script HTML que integra las directivas AngularJS -->
    <div ng-app="miAplicacion" ng-controller="miControlador">

      <!-- Utilización del tipo de letra de caracteres Arial -->
      <font face="Arial">

        <!-- Visualización de la temporización -->
        <div
          ng-show="visualizacionCuentaTiempo > 0">
          La cuenta se detendrá en 5 segundos
        </div>
        <div
          ng-show="visualizacionCuentaTiempo > 0">
          Número de segundos restantes : {{visualizacionCuentaTiempo}}
        </div>
        <div
          ng-show="visualizacionCuentaTiempo == 0">
          La cuenta de 5 segundos ha terminado
        </div>

      </font>

    </div>

    <!-- Módulo y controlador AngularJS -->
    <script>

      // Definición del módulo miAplicacion
      var application = angular.module('miAplicacion', []);

      // Definición del controlador miControlador
      application.controller('miControlador', function($scope, $timeout) {

        // Inicialización del contador de segundos
        var cuentaTiempo = 5;

        // Definición de la función gestionarTiempo
        gestionarTiempo = function() {
          if (cuentaTiempo >= 0) {
            // Actualización de la visualización
            $scope.visualizacionCuentaTiempo = cuentaTiempo;
            // Decrementar el contador de segundos
            cuentaTiempo--;
            // Vuelve a lanzar la función gestionarTiempo (cada 1000 ms=1 segundo)
            $timeout(gestionarTiempo, 1000);
          }
        };

        // Lanzamiento de la función gestionarTiempo
        gestionarTiempo()

        // Visualización de la cuenta del tiempo restante
        $scope.visualizacionCuentaTiempo = cuentaTiempo;

      });

    </script>

  </body>

</html>