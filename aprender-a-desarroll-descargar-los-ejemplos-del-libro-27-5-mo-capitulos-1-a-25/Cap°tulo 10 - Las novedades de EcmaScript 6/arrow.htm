<!DOCTYPE html>

<!--
Nombre del script : arrow.htm
Autor : Christian VIGOUROUX
Fecha de creación : 15/10/2018
Fecha de última modificación : 15/10/2018
Objetivo : Utilización de la sintaxis arrow (=>)
-->

<!-- Etiqueta HTML -->
<html>

  <!-- Sección HEAD -->
  <head>
    <!-- Etiqueta meta de gestión de los acentos UTF-8 -->
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <!-- Scripts de compatibilidad ES6 (transpiling) para Microsoft Edge -->
    <script
      src="https://google.github.io/traceur-compiler/bin/traceur.js">
    </script>
    <script
      src="https://google.github.io/traceur-compiler/src/bootstrap.js">
    </script>
  </head>

  <!-- Sección BODY -->
  <body>

    <!-- Utilización del tipo de letra de caracteres Arial -->
    <font face="Arial">
            
      <!-- Visualización del título del script -->
      <h3>EcmaScript 6 : Utilización de la sintaxis arrow (=>)</h3>

      <!-- Script JavaScript -->
      <script>

        // Definición de una tabla JavaScript de coches deportivos
        // (marca solo)
        let tabCochesSport = ["Porsche", "Ferrari", "BMW"]; 

        // Bucle de visualización de 3 marcas preferidas
        // Nota del autor: Utilización de forEach
        document.write("<br />Bucle de visualización de 3 marcas preferidas");
        document.write(" (utilización de ForEach sin notación =>) :<br />");
        tabCochesSport.forEach(function(marca) {
          document.write("Marca : " + marca + "<br />");
        })

        // Bucle de visualización de 3 marcas preferidas
        // Nota del autor: Utilización de forEach con notación =>
        document.write("<br />Bucle de visualización de 3 marcas preferidas");
        document.write(" (utilización de ForEach con notación =>) :<br />");
        tabCochesSport.forEach(marca => {
          document.write("Marca : " + marca + "<br />");
        })

        // Definición de un objeto JavaScript de coches deportivos
        // (sin arrow function)
        var objCochesSport1 = {
          marcas: ["Porsche", "Ferrari", "BMW"],
          tipo: "Coches deportivos",
          visualizarCoches: function() {
            // El self sirve para recuperar el contexto padre
            // (útil para visualizar la propiedad tipo)
            // porque function(marca) crea un nuevo scope
            // (diferente de su padre))
            var self = this;
            this.marcas.forEach(function(marca) {
              document.write("Marca : " + marca + " - ");
              document.write("Tipo : " + self.tipo + "<br />");
            })
          }
        };

        // Visualización de las marcas via el método visualizarCoches
        document.write("<br />Bucle de visualización de 3 marcas preferidas");
        document.write(" con su tipo (ForEach sin notación =>) :<br />");
        objCochesSport1.visualizarCoches();

        // Definición de un objeto JavaScript de coches deportivos
        // (con arrow function)
        var objCochesSport2 = {
          marcas: ['Porsche', 'Ferrari', 'BMW'],
          tipo: 'Coches deportivos',
          visualizarCoches: function() {
            // El self ya no es necesario
            // porque la arrow function no crea su propio scope
            // this.tipo hace referencia al this del padre
            this.marcas.forEach((marca) => {
              document.write("Marca : " + marca + " - ");
              document.write("Tipo : " + this.tipo + "<br />");
            })
          }
        }

        // Visualización de las marcas via el método visualizarCoches
        document.write("<br />Bucle de visualización de 3 marcas preferidas");
        document.write(" con su tipo (ForEach con notación =>) :<br />");
        objCochesSport2.visualizarCoches();

      </script>
      
    </font>

  </body>

</html>